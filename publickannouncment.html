<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Admin ‚Äî Post Announcement</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">

<style>
:root {
  --green:#00c853;
  --green-dark:#00bfa5;
  --bg:#f0f3f8;
  --card:#fff;
  --muted:#757a80;
  --red:#ff3b30;
}

*{box-sizing:border-box;margin:0;padding:0;}
body{
  font-family:'Poppins',sans-serif;
  background:var(--bg);
  color:#222;
  min-height:100vh;
  display:flex;
  flex-direction:column;
}

/* Header */
.header{
  background:linear-gradient(145deg,var(--green),var(--green-dark));
  color:#fff;
  padding:14px 20px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  box-shadow:0 4px 10px rgba(0,0,0,0.1);
  position:sticky;
  top:0;
  z-index:10;
}
.header h1{margin:0;font-size:18px;}
.container{
  max-width:720px;
  width:92%;
  margin:25px auto;
  flex:1;
  background:var(--card);
  padding:20px;
  border-radius:5px;
  box-shadow:0 5px 20px rgba(0,0,0,0.05);
}

/* Form */
label{
  display:block;
  font-weight:600;
  margin-top:12px;
  font-size:14px;
}
input, textarea{
  width:100%;
  border:1px solid #dce3ea;
  border-radius:5px;
  padding:10px 12px;
  font-size:14px;
  margin-top:6px;
  background:#f9fbfd;
  transition:0.3s;
}
input:focus, textarea:focus{
  border-color:var(--green);
  background:#fff;
  outline:none;
}
textarea{resize:none;height:100px;}

button{
  background:linear-gradient(145deg,var(--green),var(--green-dark));
  color:#fff;
  border:none;
  border-radius:5px;
  padding:12px 16px;
  margin-top:18px;
  cursor:pointer;
  font-weight:600;
  width:100%;
  transition:0.3s ease;
}
button:hover{opacity:0.9;transform:scale(1.02);}

/* Message Box */
.msg{
  margin-top:15px;
  padding:10px;
  border-radius:5px;
  display:none;
  text-align:center;
  font-weight:600;
}
.msg.success{background:#e8fdf0;color:#047d3a;}
.msg.error{background:#ffe6e6;color:#b80000;}

/* Secret Key Prompt */
#adminLock{
  position:fixed;
  top:0;left:0;width:100%;height:100%;
  background:rgba(0,0,0,0.6);
  display:flex;align-items:center;justify-content:center;
  z-index:9999;
}
#lockBox{
  background:#fff;
  padding:25px;
  border-radius:8px;
  width:90%;
  max-width:350px;
  text-align:center;
  box-shadow:0 5px 20px rgba(0,0,0,0.2);
}
#lockBox h2{margin-bottom:12px;}
#lockBox input{
  width:100%;
  padding:10px;
  border-radius:5px;
  border:1px solid #ccc;
  font-size:14px;
}
#lockBox button{
  margin-top:12px;
  background:var(--green);
  color:#fff;
  border:none;
  border-radius:5px;
  padding:10px 14px;
  cursor:pointer;
  width:100%;
  font-weight:600;
}
#lockBox button:hover{opacity:0.9;}
</style>
</head>
<body>

  <div class="header">
    <h1>Admin ‚Äî Post Announcement</h1>
  </div>

  <div class="container" id="adminPanel" style="display:none;">
    <h2>üì¢ Create Public Announcement</h2>
    <label>Title</label>
    <input type="text" id="title" placeholder="Enter announcement title">

    <label>Message</label>
    <textarea id="message" placeholder="Enter announcement message..."></textarea>

    <button id="postBtn">Post Announcement</button>

    <div class="msg" id="statusMsg"></div>
  </div>

  <!-- Secret Key Popup -->
  <div id="adminLock">
    <div id="lockBox">
      <h2>üîê Admin Access</h2>
      <p style="font-size:13px;color:#666;">Enter secret key to access admin panel</p>
      <input type="password" id="secretKey" placeholder="Enter secret key">
      <button id="unlockBtn">Unlock</button>
      <p id="lockError" style="color:red;font-size:13px;margin-top:8px;display:none;">Invalid key!</p>
    </div>
  </div>

  <script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
  import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

  // ‚úÖ Firebase Config
  const firebaseConfig = {
    apiKey: "AIzaSyDEQYPJFxQv8yFHptrTqoLHOn2L0PpgVhc",
    authDomain: "btcinvest-c0e25.firebaseapp.com",
    projectId: "btcinvest-c0e25",
    storageBucket: "btcinvest-c0e25.firebasestorage.app",
    messagingSenderId: "204937458487",
    appId: "1:204937458487:web:cc27ece1249999279f60b2"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  const adminPanel = document.getElementById("adminPanel");
  const titleInput = document.getElementById("title");
  const msgInput = document.getElementById("message");
  const postBtn = document.getElementById("postBtn");
  const statusMsg = document.getElementById("statusMsg");

  const adminLock = document.getElementById("adminLock");
  const unlockBtn = document.getElementById("unlockBtn");
  const secretKeyInput = document.getElementById("secretKey");
  const lockError = document.getElementById("lockError");

  // üîê Set your admin secret key here
  const ADMIN_SECRET_KEY = "trustdollar@2025";

  unlockBtn.addEventListener("click", ()=>{
    const key = secretKeyInput.value.trim();
    if(key === ADMIN_SECRET_KEY){
      adminLock.style.display = "none";
      adminPanel.style.display = "block";
    }else{
      lockError.style.display = "block";
      setTimeout(()=> lockError.style.display="none", 2500);
    }
  });

  // üì¢ Post announcement
  postBtn.addEventListener("click", async ()=>{
    const title = titleInput.value.trim();
    const message = msgInput.value.trim();

    if(!title || !message){
      showStatus("Please fill all fields.", false);
      return;
    }

    try {
      await addDoc(collection(db, "publicAnnouncements"), {
        title,
        message,
        createdAt: serverTimestamp()
      });
      showStatus("‚úÖ Announcement posted successfully!", true);
      titleInput.value = "";
      msgInput.value = "";
    } catch (err){
      console.error(err);
      showStatus("‚ùå Failed to post announcement!", false);
    }
  });

  function showStatus(text, success){
    statusMsg.textContent = text;
    statusMsg.className = success ? "msg success" : "msg error";
    statusMsg.style.display = "block";
    setTimeout(()=> statusMsg.style.display="none", 3000);
  }
  </script>

</body>
</html>
